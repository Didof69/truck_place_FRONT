<div *ngIf="user" class="container-fluid">
  <div class="banner d-flex">
    <button class="btn-modify align-self-end ms-auto">
      <img
        src="../../../assets/icones/modify_green.png"
        alt="bouton pour modifier le profil"
        class="icone"
        (click)="onUpdate()"
      />
    </button>
  </div>

  <div class="user-icon d-flex justify-content-center">
    <div id="iconUser">
      <img src="../../../assets/icones/account_green.png" alt="" />
    </div>
  </div>

  <div class="d-flex justify-content-center" *ngIf="!updateMode">
    <div class="user-profile d-flex flex-column justify-content-center">
      <div class="d-flex">
        <div style="width: 25px"></div>
        <p class="p-pseudo">{{ user.pseudo }}</p>
      </div>
      <div class="d-flex">
        <img
          class="userProfileIcon"
          src="../../../assets/icones/account_green.png"
          alt=""
        />
        <p class="p-profile">{{ user.firstname }} {{ user.user_name }}</p>
      </div>
      <div class="d-flex">
        <img
          class="userProfileIcon"
          src="../../../assets/icones/email_green.png"
          alt=""
        />
        <p class="p-profile">{{ user.email }}</p>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center" *ngIf="updateMode">
    <form (ngSubmit)="onSubmit()" #updateUserForm="ngForm">
      <div class="d-flex">
        <div class="user-profile d-flex flex-column justify-content-center">
          <div class="d-flex">
            <div style="width: 25px"></div>
            <input
              class="form-control"
              type="text"
              id="pseudo"
              name="pseudo"
              [(ngModel)]="updatedUser.pseudo"
              [value]="user.pseudo"
              required
            />
          </div>
          <div class="d-flex">
            <img
              class="userProfileIcon"
              src="../../../assets/icones/account_green.png"
              alt=""
            />
            <input
              class="form-control"
              type="text"
              id="firstname"
              name="firstname"
              [(ngModel)]="updatedUser.firstname"
              [value]="user.firstname"
              required
            />
            <input
              class="form-control"
              type="text"
              id="user_name"
              name="user_name"
              [(ngModel)]="updatedUser.user_name"
              [value]="user.user_name"
              required
            />
          </div>
          <div class="d-flex">
            <img
              class="userProfileIcon"
              src="../../../assets/icones/email_green.png"
              alt=""
            />
            <input
              class="form-control"
              type="email"
              id="email"
              name="email"
              [(ngModel)]="updatedUser.email"
              [value]="user.email"
              required
            />
          </div>
        </div>
        <div>
          <button
            type="submit"
            class="btn btn-truck"
            [disabled]="updateUserForm.invalid"
          >
            Confirmer
          </button>
          <button type="button" class="btn btn-danger" (click)="onUpdate()">
            Annuler
          </button>
        </div>
      </div>
    </form>
  </div>

  <div *ngIf="user.likedParkings.length > 0" class="parking-liked">
    <div class="card m-2 parking-zone">
      <p>Parkings Favoris</p>
      <div class="d-flex flex-row">
        <app-parking-liked-card
          *ngFor="let parking of user.likedParkings"
          [parking]="parking"
          [user]="user"
        ></app-parking-liked-card>
      </div>
    </div>
  </div>
  <div class="delete-profile d-flex justify-content-center">
    <button class="btn btn-danger" (click)="onDelete()">
      Supprimer mon compte
    </button>
  </div>
</div>
